# link shortener (desktop app)

### для запуска приложения нужно

- Java 17 или выше
- Maven 3.8.0 или выше
- redis на 6379 порту


### как запустить для тестов

для редис
```shell
docker run -d --name redis -p 6379:6379 redis:latest
```

для самого приложения
```shell
git clone git@github.com:AleksKislov/link_shortener_test.git test_links
cd test_links
mvn compile exec:java -Dexec.mainClass="org.example.Main"
```

### модули

стуктура - приближена к DDD, разбита на слои:

- domain: описан основной entity Link и интерфейс ILinkRepository
- infra: реализация LinkRepository и методов, описанных в ILinkRepository (зависимость тут - редис), сам класс просто общается с БД (сохраняет данные, достает их оттуда, небольше)
- application: LinkService - здесь "бизнес"-логика работы со ссылками, как их сохраняем, как именно хэшируем и сокращаем ссылку и пр. Этот класс общается с LinkRepository
- controller: LinkController - вызов методов в LinkService

доп. модули:
- view: дополнительный слой, где реализован UI для работы с приложением (вызывает методы LinkController)
- config: конфиг с настройками для redis и конфиг с основными параметрами работы приложения SystemConfig (заполняется при запуске приложения данными из файла resources/conf.json, чтобы не менять код, если нужно задать параметры типа мин. кол-во кликов, base url для коротких ссылок и мин. время жизни ссылки)

### dependencies в pom.xml

- Jedis - клиент для работы с Redis

- Jackson Databind - для сериализации/десериализации JSON

- Lombok - для подкапотного создания boilerplate кода (геттеры, сеттеры, builder и др.)

### как тестировать 

1. Функциональность: ввести новую ссылку (например, https://chineseplus.club), кол-во кликов, ее TTL в секундах (время жизни), нажать кнопку "Сохранить". Появится инфо по новому пользователю и его первая короткая ссылка
2. Внесение основных параметров работы алгоритма в конфигурационный файл: для этих целей resources/conf.json (можно задать макс. TTL для ссылки, сейчас сутки; мин. кол-во кликов = 3 и доменное имя для коротких ссылок clck.ru/)
3. Ограничение по времени жизни: для новой ссылки можно поставить TTL в несколько секунд, и ссылка сама удалится, при этом будет popup сообщение пользователю ссылки об истечении ее срока
4. Автоматическое удаление ссылок: ссылка удаляется автоматически не только при истечении TTL, но и при достижении лимита по кликам, также будет сообщение пользователю
5. Уникальность ссылок: другой пользователь может завести такую же ссылку и будет сгенерирована другая короткая ссылка (для этого нужно сбросить текущего пользователя нажав на кнопку выбора пользователя и затем кнопку новый пользователь). Короткая ссылка будет другая, так как берется хэш от ссылки + uuid пользователя.
6. Повторное создание ссылок: при повторном заведении той же ссылки можно менять ее TTL и кол-во кликов. При этом short link останется прежним, данный пункт оставил as is, так как в исходном ТЗ не было строго по этому пункту, но в целом, если есть цель на ту же ссылку генерировать новый short link, то можно для высчитывания хэша подключать еще и uuid ссылки.
7. Переход по ссылке: можно кликнуть по короткой ссылке (синего цвета), выбрав uuid нужно пользователя или введя короткий url (например, clck.ru/jnkj3) в поле с лейблом "перейти по короткой ссылке и нажить enter"
8. Лимит переходов - кол-во кликов уменьшается для ссылки при переходе по ней, когда останется 0, то ссылка удаляется и пользователь уведомляется об этом (popup окошко с сообщением)
9. Уведомление пользователя - пользователь уведомляется popup сообщением по истечению TTL ссылки и израсходования кликов
10. Редактирование лимита переходов - пользователь может редактировать свои ссылки, нужно выбрать нужного пользователя и заново ввести данные по ссылке (исходная ссылка, новый TTL и лимит по кликам), данные будут заменены на новые, короткая ссылка останется та же
11. Удаление ссылки - пользователь может удалять свои ссылки, нужно выбрать пользователя и для нужной ссылки нажать "удалить"
12. Идентификация по UUID - осуществляется через кнопки выбора пользователя с указанным нужным UUID пользователя
13. Работа нескольких пользователей - можно заводить сколько угодно новых пользователей через кнопки (выбор пользователей и потом новый пользовтаель). Новому пользователю дается новый uuid при заведении первой ссылки
14. Администрирование параметров ссылки - при выборе пользователя будет указан данный текущий пользователь, только он и сможет менять или удалять свои ссылки
15. Создание нескольких ссылок - можно создавать сколько угодно ссылок